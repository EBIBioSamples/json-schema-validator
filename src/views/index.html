
<!DOCTYPE html>
<!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7" lang="en" dir="ltr"><![endif]-->
<!--[if IE 7]><html class="lt-ie9 lt-ie8" lang="en" dir="ltr"><![endif]-->
<!--[if IE 8]><html class="lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <link rel="shortlink" href="/node/1010" />
    <link rel="shortcut icon" href="https://www.elixir-europe.org/sites/all/themes/elixir/images/favicons/favicon.ico" type="image/vnd.microsoft.icon" />
    <meta name="Generator" content="Drupal 7 (http://drupal.org)" />
    <link rel="canonical" href="/home" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>ELIXIR | A distributed infrastructure for life-science information</title>
    <link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,400italic,700" media="all">
    <link type="text/css" rel="stylesheet" href="https://www.elixir-europe.org/sites/default/files/css/css_alkXiIYnGs3ZXS5VagdKzx636Uat9PLfyZXOIinYVDk.css" media="all" />
    <link type="text/css" rel="stylesheet" href="https://www.elixir-europe.org/sites/default/files/css/css_kq7aQIivPRxmKwpRF4zDy7tVwdNjWHKBFWnt8BFr3QE.css" media="screen" />
    <link type="text/css" rel="stylesheet" href="https://www.elixir-europe.org/sites/default/files/css/css_buIuAc05O607bLWgjOFN-QaFxTW7f4MVDLrd_yqZmCc.css" media="print" />
    <link type="text/css" rel="stylesheet" href="https://www.elixir-europe.org/sites/default/files/css/css_6rEIa2oHdO8QYKWF5kH_5jnDcPW0kRgmrnNnKANgn-E.css" media="only screen" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <link type="text/css" rel="stylesheet" href="https://www.elixir-europe.org/sites/default/files/css/css_3N1IuVi0VQRKfmilefgd9bEoo0mqJAzbLCyAwn1HFaE.css" media="screen" />
    <![endif]-->
    <script type="text/javascript" src="https://www.elixir-europe.org/sites/default/files/js/js_gZMBtDw_x_asFO_93fRFp1i1Py4R0zzduUcn0P06zeY.js"></script>

    <style>
        .row {
            display: flex;
            flex-direction: row;
        }
        .left {
            flex: 1;

        }
        .right {
            flex: 1;
        }
    </style>
</head>
<body class="html front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-1010 node-type-page site-name-hidden atr-7.x-3.x site-name-elixir">
<div id="skip-link" class="nocontent">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
</div>
<div id="page-wrapper">
    <div id="page" class="page">


        <div id="header-wrapper">
            <div class="container clearfix">
                <header id="header" class="clearfix" role="banner">

                    <!-- start: Branding -->
                    <div id="branding" class="branding-elements clearfix">

                        <div id="logo">
                            <a href="/" class="active"><img class="site-logo" typeof="foaf:Image" src="https://www.elixir-europe.org/system/files/white-orange-logo.png" alt="ELIXIR" /></a>                </div>

                        <!-- start: Site name and Slogan -->
                        <div class="element-invisible h-group" id="name-and-slogan">

                            <h1 class="element-invisible" id="site-name"><a href="/" title="Home page" class="active">ELIXIR</a></h1>


                        </div><!-- /end #name-and-slogan -->


                    </div><!-- /end #branding -->

                </header>
            </div>
        </div>


        <div id="content-wrapper">
            <div class="container">
            <div id="columns">
                <div class="columns-inner clearfix">
                <div id="content-column">
                    <div class="content-inner">

                    <section id="main-content">

                        <h1>Elixir JSON schema validator</h1>
                        <p>
                            This page allows you to validate JSON against a JSON schema using the Elixir JSON schema validator. The validator is based on AJV and includes
                            custom keyword extensions that are relevant for life science data validation.
                        </p>

                    </section>

                    <section class="row">

                        <div  class="left">
                            <div class="bloc_left">
                                <form>
                                    <div>
                                        <span><a id="load" href="#">Load sample data</a></span>
                                        <div style="display: inline;">
                                            <button id="validate" value="Validate">Validate</button>
                                        </div>
                                        <div class="horiz">
                                            <label for="input">Schema:</label>
                                            <span class="error starthidden" style="display: none;" id="input-invalid">Invalid JSON parse error, <a id="input-link" href="#"></a></span>
                                        </div>
                                        <textarea name="input" rows="20" cols="60" id="input" placeholder="Enter your JSON schema or a URL to your schema here..." ></textarea>

                                        <div class="horiz">
                                            <label for="input2">Data:</label>
                                            <span class="error starthidden" style="display: none;" id="input2-invalid">Invalid JSON parse error, <a id="input2-link" href="#"></a></span>
                                        </div>
                                        <textarea name="input2" rows="20" cols="60" class="half"
                                                  id="input2" placeholder="Enter JSON instance to validate against the schema..." ></textarea>


                                    </div>
                                </form>
                            </div>
                        </div>

                        <div style="margin-left: 2%" class="right">
                            <div >
                                <div>
                                    <div style="text-align: left;" class="horiz">
                                        <span style="font-weight: bold; ">Validation results:</span>
                                        <br/>
                                        <span id="failed" style="display: none;color : red;" id="processingFailure">INVALID</span>
                                        <span id= "valid" style="display: none;color : green;" id="processingSuccess">VALID</span>
                                        <div id="results"></div>

                                    </div>
                                </div>

                            </div>
                        </div>

                    </section>


                </div></div>
            </div></div>
        </div></div>


    </div>
</div>
</body>
<script>

    $(document).ready(function() {

        $("#results").val("")

        $("#load").click(function(evt) {
            evt.preventDefault();
            schema = {
                "$schema": "http://json-schema.org/draft-07/schema#",

                "type": "object",
                "properties": {
                    "alias": {
                        "description": "A sample unique identifier in a submission.",
                        "type": "string"
                    },
                    "taxonId": {
                        "description": "The taxonomy id for the sample species.",
                        "type": "integer"
                    },
                    "taxon": {
                        "description": "The taxonomy name for the sample species.",
                        "type": "string"
                    },
                    "releaseDate": {
                        "description": "Date from which this sample is released publicly.",
                        "type": "string",
                        "format": "date"
                    },
                    "disease": {
                        "description": "The disease for the sample species.",
                        "type": "string"
                    },
                    "disease_id": {
                        "description": "The ontology id for the disease sample species.",
                        "type": "string",
                        "graph_restriction":  {
                            "ontologies" : ["obo:mondo", "obo:efo"],
                            "classes": ["MONDO:0000001","PATO:0000461"],
                            "relations": ["rdfs:subClassOf"],
                            "direct": false,
                            "include_self": true
                        }
                    }
                },
                "required": ["alias", "taxonId" ]
            };
            object = {
                "alias": "MA456",
                "taxonId": 9606,
                "disease": "glioblastoma",
                "disease_id": "MONDO:0018177"
            };
            $("#input").val(JSON.stringify(schema, null, 2));
            $("#input2").val(JSON.stringify(object, null, 2));
        });

        $( "#validate" ).click(function( event ) {
            event.preventDefault();
        }).bind("click", function (e) {

            var schema = JSON.parse($("#input").val());
            var instance = JSON.parse($("#input2").val());

            var submit = {
                "schema" : schema,
                "object" : instance
            };


            $.ajax({
                type: "POST",
                url: 'validate',
                data: JSON.stringify(submit),
                success: function (response) {

                    if (response.validationState == "VALID") {
                        $("#valid").show()
                        $("#failed").hide()
                    }
                    else {
                        $("#valid").hide()
                        $("#failed").show()
                        $('#results').append("<ul id='cList'></ul>");
                        for (i = 0; i < response.validationErrors.length; i++) {
                            $("#cList").append("<li><span style=\"colour: red;\">" +
                                response.validationErrors[i].userFriendlyMessage + "</span></li>");
                        }

                    }
                },
                contentType: 'application/json'
            });


        });



    });



</script>
</html>
